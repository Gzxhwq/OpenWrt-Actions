From 554742f9e966c428d7c7eebc8622017a2523e66c Mon Sep 17 00:00:00 2001
From: Gzxhwq <gzxhwq@gmail.com>
Date: Fri, 1 Oct 2021 11:59:25 +0800
Subject: [PATCH] Revert "tools/ccache: update to 4.4.1 (#7930)"

This reverts commit 6df7af1c759809b858573acff03288807087850d.
---
 tools/ccache/Makefile                       | 5 ++---
 tools/ccache/patches/100-honour-copts.patch | 2 +-
 2 files changed, 3 insertions(+), 4 deletions(-)

diff --git a/tools/ccache/Makefile b/tools/ccache/Makefile
index 964d11780..3db6cc081 100644
--- a/tools/ccache/Makefile
+++ b/tools/ccache/Makefile
@@ -8,11 +8,11 @@ include $(TOPDIR)/rules.mk
 include $(INCLUDE_DIR)/target.mk
 
 PKG_NAME:=ccache
-PKG_VERSION:=4.4.1
+PKG_VERSION:=4.2.1
 
 PKG_SOURCE:=$(PKG_NAME)-$(PKG_VERSION).tar.xz
 PKG_SOURCE_URL:=https://github.com/ccache/ccache/releases/download/v$(PKG_VERSION)
-PKG_HASH:=ebd6dfb5b15dfe39310e1f5834bafbe6ab526c71df8ad08a508e8a242bad8159
+PKG_HASH:=9d6ba1cdefdc690401f404b747d81a9a1802b17af4235815866b7620d980477e
 
 HOST_BUILD_PARALLEL:=1
 
@@ -24,7 +24,6 @@ CMAKE_HOST_OPTIONS += \
 	-DCMAKE_CXX_COMPILER_LAUNCHER="" \
 	-DCMAKE_SKIP_RPATH=FALSE \
 	-DCMAKE_INSTALL_RPATH="${STAGING_DIR_HOST}/lib" \
-	-DREDIS_STORAGE_BACKEND=OFF
 
 ifneq (docs-$(CONFIG_BUILD_DOCUMENTATION),docs-y)
 CMAKE_HOST_OPTIONS += -DENABLE_DOCUMENTATION=OFF
diff --git a/tools/ccache/patches/100-honour-copts.patch b/tools/ccache/patches/100-honour-copts.patch
index e9c1b2fe1..0dcc6598f 100644
--- a/tools/ccache/patches/100-honour-copts.patch
+++ b/tools/ccache/patches/100-honour-copts.patch
@@ -1,6 +1,6 @@
 --- a/src/ccache.cpp
 +++ b/src/ccache.cpp
-@@ -1629,6 +1629,7 @@ calculate_result_name(Context& ctx,
+@@ -1756,6 +1756,7 @@ calculate_result_name(Context& ctx,
                               "CPLUS_INCLUDE_PATH",
                               "OBJC_INCLUDE_PATH",
                               "OBJCPLUS_INCLUDE_PATH", // clang
-- 
2.33.0

