From a3686d1b7f75c1208a34bbfaf8afd0d096daacf2 Mon Sep 17 00:00:00 2001
From: Ailick <277498654@qq.com>
Date: Mon, 20 Sep 2021 09:49:25 +0800
Subject: [PATCH] (TEST) fix the issue of shortcut-fe-cm premature loading

---
 package/lean/shortcut-fe/shortcut-fe/Makefile                   | 1 +
 .../lean/shortcut-fe/shortcut-fe/files/etc/init.d/shortcut-fe   | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/package/lean/shortcut-fe/shortcut-fe/Makefile b/package/lean/shortcut-fe/shortcut-fe/Makefile
index 6a2ca6a54270..f326e59c9cdf 100644
--- a/package/lean/shortcut-fe/shortcut-fe/Makefile
+++ b/package/lean/shortcut-fe/shortcut-fe/Makefile
@@ -31,6 +31,7 @@ define KernelPackage/shortcut-fe
 	   CONFIG_SHORTCUT_FE=y \
 	   CONFIG_XFRM=y
   PROVIDES:=$(PKG_NAME)
+  AUTOLOAD:=$(call AutoLoad,09,shortcut-fe shortcut-fe-ipv6)
 endef
 
 define KernelPackage/shortcut-fe/Description
diff --git a/package/lean/shortcut-fe/shortcut-fe/files/etc/init.d/shortcut-fe b/package/lean/shortcut-fe/shortcut-fe/files/etc/init.d/shortcut-fe
index 0eccdbf84c67..88c381ade07a 100755
--- a/package/lean/shortcut-fe/shortcut-fe/files/etc/init.d/shortcut-fe
+++ b/package/lean/shortcut-fe/shortcut-fe/files/etc/init.d/shortcut-fe
@@ -15,7 +15,7 @@
 
 #SFE connection manager has a lower priority, it should be started after other connection manager
 #to detect the existence of connection manager with higher priority
-START=72
+START=99
 
 have_cm() {
 	[ -d "/sys/kernel/debug/ecm" ] && echo 1 && return